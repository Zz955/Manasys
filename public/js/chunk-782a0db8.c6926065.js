(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-782a0db8"],{"2ce3":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商品列表")])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品ID"}},[a("span",[t._v(t._s(e.row.id))])]),a("el-form-item",{attrs:{label:"所属分类"}},[a("span",[t._v(t._s(e.row.category))])]),a("el-form-item",{attrs:{label:"商品图片"}},[a("span",[t._v(t._s(e.row.imgUrl))])]),a("el-form-item",{attrs:{label:"商品评价"}},[a("span",[t._v(t._s(e.row.rating))])]),a("el-form-item",{attrs:{label:"商品描述"}},[a("span",[t._v(t._s(e.row.goodsDesc))])]),a("el-form-item",{attrs:{label:"商品名称"}},[a("span",[t._v(t._s(e.row.name))])]),a("el-form-item",{attrs:{label:"商品价格"}},[a("span",[t._v(t._s(e.row.price))])]),a("el-form-item",{attrs:{label:"商品创建时间"}},[a("span",[t._v(t._s(e.row.ctime))])]),a("el-form-item",{attrs:{label:"商品销量"}},[a("span",[t._v(t._s(e.row.sellCount))])])],1)]}}])}),a("el-table-column",{attrs:{label:"商品名称",prop:"name"}}),a("el-table-column",{attrs:{label:"所属分类",prop:"category"}}),a("el-table-column",{attrs:{label:"商品价格",prop:"price"}}),a("el-table-column",{attrs:{label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:"http://127.0.0.1:5000/upload/imgs/goods_img/"+t.row.imgUrl,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"商品描述",prop:"goodsDesc"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-dialog",{attrs:{title:"收货地址",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"商品名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"商品价格","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),a("el-form-item",{attrs:{label:"商品描述","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.goodsDesc,callback:function(e){t.$set(t.form,"goodsDesc",e)},expression:"form.goodsDesc"}})],1),a("el-form-item",{attrs:{label:"商品图片","label-width":t.formLabelWidth}},[a("div",{staticClass:"update"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{id:"box",action:"http://127.0.0.1:5000/goods/goods_img_upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),a("el-form-item",{attrs:{label:"商品分类","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.cateName,value:t.cateName}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveShopEdit}},[t._v("确 定")])],1)],1),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},o=[],i=(a("4160"),a("b0c0"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("fd41")),r={data:function(){return{options:[],value:"",tableData:[],currentPage:1,pageSize:5,imageUrl:"",imgUrl:"",total:0,gridData:[],dialogFormVisible:!1,form:{goodsDesc:"",price:"",name:"",region:"",id:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px"}},methods:{handleEdit:function(t,e){console.log(t,e),this.form.id=e.id,this.dialogFormVisible=!0},saveShopEdit:function(){var t=this;this.dialogFormVisible=!1;var e=this.form,a=e.name,l=e.price,o=e.goodsDesc,r=e.id;Object(i["m"])(a,this.value,l,this.imgUrl,o,r).then((function(e){e&&(a="",t.value="",l="",t.imgUrl="",o="",r=""),t.getShoplist()}))},handleDelete:function(t,e){var a=this;console.log(t,e),this.$confirm("此操作将删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["h"])(e.id).then((function(t){t&&(a.getShoplist(),a.$message({type:"success",message:"删除成功!",duration:1500}))}))})).catch((function(){a.$message({type:"info",message:"已取消删除",duration:1500})}))},getShoplist:function(){var t=this;Object(i["v"])(this.currentPage,this.pageSize).then((function(e){console.log(e),t.total=e.data.total,t.tableData=e.data.data}))},handleSizeChange:function(t){this.pageSize=t,this.getShoplist()},handleCurrentChange:function(t){this.currentPage=t,this.getShoplist()},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),console.log(t),this.imgUrl=t.imgUrl},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}},created:function(){var t=this;this.getShoplist(),Object(i["o"])().then((function(e){var a=e.data.categories;a.forEach((function(e,a){e.value=a,t.options.push(e)}))}))}},s=r,n=(a("69ac"),a("0c7c")),c=Object(n["a"])(s,l,o,!1,null,"345ca22c",null);e["default"]=c.exports},"69ac":function(t,e,a){"use strict";var l=a("c50a"),o=a.n(l);o.a},b0c0:function(t,e,a){var l=a("83ab"),o=a("9bf2").f,i=Function.prototype,r=i.toString,s=/^\s*function ([^ (]*)/,n="name";l&&!(n in i)&&o(i,n,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})},c50a:function(t,e,a){}}]);
//# sourceMappingURL=chunk-782a0db8.c6926065.js.map